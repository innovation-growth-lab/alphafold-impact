_gtr_raw: &_gtr_raw
  type: ${_json.type}
  credentials: s3_credentials

_gtr_intermediate: &_gtr_intermediate
  type: pandas.ParquetDataset
  credentials: s3_credentials
  load_args:
    engine: pyarrow

gtr_raw_projects:
  <<: *_gtr_raw
  filepath: s3://alphafold-impact/data/01_raw/gtr/projects.json

gtr_raw_publications:
  <<: *_gtr_raw
  filepath: s3://alphafold-impact/data/01_raw/gtr/outcomes/publications.json

gtr_raw_organisations:
  <<: *_gtr_raw
  filepath: s3://alphafold-impact/data/01_raw/gtr/organisations.json

gtr_raw_funds:
  <<: *_gtr_raw
  filepath: s3://alphafold-impact/data/01_raw/gtr/funds.json

gtr_intermediate_projects:
  <<: *_gtr_intermediate
  filepath: s3://alphafold-impact/data/02_intermediate/gtr/projects.parquet

gtr_intermediate_publications:
  <<: *_gtr_intermediate
  filepath: s3://alphafold-impact/data/02_intermediate/gtr/outcomes/publications.parquet

gtr_intermediate_organisations:
  <<: *_gtr_intermediate
  filepath: s3://alphafold-impact/data/02_intermediate/gtr/organisations.parquet

gtr_intermediate_funds:
  <<: *_gtr_intermediate
  filepath: s3://alphafold-impact/data/02_intermediate/gtr/funds.parquet

gtr_intermediate_publications_oa_dict:
  <<: *_gtr_raw
  filepath: s3://alphafold-impact/data/02_intermediate/gtr/outcomes/pub_oa_dict.json

gtr_intermediate_publication_citations:
  <<: *_gtr_raw
  path: s3://alphafold-impact/data/02_intermediate/gtr/outcomes/publication_citations/
  type: partitions.PartitionedDataset
  dataset: ${_json.type}
  filename_suffix: ".json"
  
works_for_concepts:
  type: ${_json.type}
  filepath: s3://alphafold-impact/data/01_raw/openalex/works/works_for_concepts.json
  credentials: s3_credentials

oa_raw_works_for_concepts_and_years:
  type: kedro_datasets.pandas.JSONDataset
  filepath: s3://alphafold-impact/data/01_raw/openalex/works/oa_works_for_concepts_and_years.json
  credentials: s3_credentials

works_for_concepts:
  type: ${_json.type}
  filepath: s3://alphafold-impact/data/01_raw/openalex/works/works_for_concepts.json
  credentials: s3_credentials

_work_citations: &_work_citations
  type: partitions.PartitionedDataset
  dataset: ${_json.type}
  filename_suffix: ".json"
  credentials: s3_credentials

works_incoming_citations:
  <<: *_work_citations
  path: s3://alphafold-impact/data/02_intermediate/openalex/works/cited_by/

works_outgoing_citations:
  <<: *_work_citations
  path: s3://alphafold-impact/data/02_intermediate/openalex/works/cites/
  
downstream_incoming_citations:
  type: partitions.PartitionedDataset
  dataset: ${_json.type}
  filename_suffix: ".json"
  path: "s3://alphafold-impact/data/02_intermediate/openalex/works/cited_by/downstream/${globals:get.work_id, undefined}/"
  credentials: s3_credentials